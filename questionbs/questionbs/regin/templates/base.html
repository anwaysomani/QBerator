{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE-Edge">
    <meta name="viewport" content="width-device-width, intital-scale=1">
    <link rel="stylesheet" href="{% static "css/base.css" %}" type="text/css" />
    <title>{% block title %}Question Bank Software{% endblock %}</title>
  </head>
  <body>
    <header>
      <h1>Question Bank Software</h1>
      {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">logout</a>
      {% else %}
        <a href="{% url 'login' %}">login</a> / <a href="{% url 'signup' %}">signup</a>
      {% endif %}
    </header>
    <hr />
    <main>
      {% block content %}
      {% endblock %}
    </main>
    <br /><br /><br />
    <hr>
    <footer>
	    <a href="{% url 'about' %}">About</a>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>
		// using jQuery
		function getCookie(name) {
	    		var cookieValue = null;
    			if (document.cookie && document.cookie !== '') {
        			var cookies = document.cookie.split(';');
        			for (var i = 0; i < cookies.length; i++) {
            				var cookie = jQuery.trim(cookies[i]);
            				// Does this cookie string begin with the name we want?
            				if (cookie.substring(0, name.length + 1) === (name + '=')) {
                				cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                				break;
            				}
        			}
    			}
    			return cookieValue;
		}

		var csrftoken = getCookie('csrftoken');

		function csrfSafeMethod(method) {
    			// these HTTP methods do not require CSRF protection
    			return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
		}
		$.ajaxSetup({
   			beforeSend: function(xhr, settings) {
        			if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            				xhr.setRequestHeader("X-CSRFToken", csrftoken);
        			}
    			}
		});
	</script>
  </body>
</html>
